

<!DOCTYPE html>
<html>
<head>
  <title>Tic-Tac-Toe vs Bot</title>
  <style>
    body {
      font-family: sans-serif;
    }

    #board {
      width: 300px;
      margin: 20px auto;
      border: 5px solid #ccc;
    }

    .square {
      width: 100px;
      height: 100px;
      float: left;
      font-size: 60px;
      line-height: 100px;
      text-align: center;
      cursor: pointer;
    }

    #message {
      margin: 20px auto;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <h1>Tic-Tac-Toe vs Bot</h1>
  <div id="board"></div>
  <div id="message"></div>
  <script>
    // create a 3x3 board
    const board = [
      ['', '', ''],
      ['', '', ''],
      ['', '', '']
    ];

    // set up variables
    let player = 'X';
    let bot = 'O';
    let moves = 0;

    // get elements
    const squares = document.querySelectorAll('#board div');
    const message = document.querySelector('#message');

    // loop through board and add event listeners to each square
    for (let i = 0; i < squares.length; i++) {
      squares[i].addEventListener('click', function() {
        // if the square is empty and the game is not over
        if (this.innerHTML === '' && !checkWin(board, player) && !checkWin(board, bot)) {
          // add player's symbol
          this.innerHTML = player;
          // update board
          let row = Math.floor(i / 3);
          let col = i % 3;
          board[row][col] = player;
          // check for win
          if (checkWin(board, player)) {
            message.innerHTML = 'You win!';
          } else {
            // switch players
            player = player === 'X' ? 'O' : 'X';
            // add bot's symbol
            let move = minimax(board, bot);
            board[move.row][move.col] = bot;
            squares[move.index].innerHTML = bot;
            // check for win
            if (checkWin(board, bot)) {
              message.innerHTML = 'You lose!';
            }
          }
          // increment moves
          moves++;
          // if board is full and no one won
          if (moves === 9) {
            message.innerHTML = 'Draw!';
          }
        }
      });
    }

    // check for win
    function checkWin(board, symbol) {
      // check rows
      for (let i = 0; i < board.length; i++) {
        if (board[i][0] === symbol && board[i][1] === symbol && board[i][2] === symbol) {
          return true;
        }
      }
      // check columns
      for (let i = 0; i < board.length; i++) {
        if (board[0][i] === symbol && board[1][i] === symbol && board[2][i] === symbol) {
          return true;
        }
      }
      // check diagonals
      if (board[0][0] === symbol && board[1][1] === symbol && board[2][2] === symbol) {
        return true;
      }
      if (board[0][2] === symbol && board[1][1] === symbol && board[2][0] === symbol) {
        return true;
      }
      // if no win
      return false;
    }

    // minimax algorithm
    function minimax(board, symbol) {
      // get empty squares
      let emptySquares = [];
      for (let i = 0; i < board.length; i++) {
        for (let j = 0; j < board.length; j++) {
          if (board[i][j] === '') {
            emptySquares.push({
              row: i,
              col: j,
              index: 3 * i + j
            });
          }
        }
      }

      // set initial best move
      let bestMove;
      let bestScore = symbol === bot ? -Infinity : Infinity;

      // loop through empty squares
      for (let i = 0; i < emptySquares.length; i++) {
        let move = emptySquares[i];
        // make the move
        board[move.row][move.col] = symbol;
        // calculate score
        let score = calculateScore(board, symbol);
        // undo the move
        board[move.row][move.col] = '';
        // update best score and move
        if (symbol === bot) {
          if (score > bestScore) {
            bestScore = score;
            bestMove = move;
          }
        } else {
          if (score < bestScore) {
            bestScore = score;
            bestMove = move;
          }
        }
      }

      // return best move
      return bestMove;
    }

    // calculate score
    function calculateScore(board, symbol) {
      // check for win
      if (checkWin(board, symbol)) {
        return symbol === bot ? 10 : -10;
      }
      // check for draw
      let emptySquares = 0;
      for (let i = 0; i < board.length; i++) {
        for (let j = 0; j < board.length; j++) {
          if (board[i][j] === '') {
            emptySquares++;
          }
        }
      }
      if (emptySquares === 0) {
        return 0;
      }
    }
  </script>
</body>
</html>
