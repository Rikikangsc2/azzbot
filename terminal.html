<!DOCTYPE html>
<html>
  <head>
    <title>Global Chat</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
  </head>
  <body>
    <div id="users"></div>
    <div id="chat"></div>
    <form id="message-form">
      <input type="text" id="message-input">
      <button type="submit">Kirim</button>
    </form>

    <script>
      const socket = io('https://rudefondlevels.ikyystore3.repl.co/');

      // Meng-handle event pengguna bergabung
      socket.on('user-joined', (user) => {
        const users = document.getElementById('users');
        users.innerHTML += `<p>${user.username} bergabung ke dalam chat</p>`;
      });

      // Meng-handle event pengguna meninggalkan
      socket.on('user-left', (user) => {
        const users = document.getElementById('users');
        users.innerHTML += `<p>${user.username} telah meninggalkan chat</p>`;
      });

      // Meng-handle event pesan baru
      socket.on('new-message', (message) => {
        const chat = document.getElementById('chat');
        chat.innerHTML += `<p><strong>${message.username}:</strong> ${message.text}</p>`;
      });

      // Meng-handle submit form pesan
      const form = document.getElementById('message-form');
      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const input = document.getElementById('message-input');
        const message = { username: 'Saya', text: input.value };
        socket.emit('send-message', message);
        input.value = '';
      });
    </script>
  </body>
</html>
